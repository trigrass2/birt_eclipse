<!--#include virtual="/mes-plan/include/header.html" -->
<div class="container-fluid panel-custom panel panel-default animated fadeInRight" style="padding:25px;">
 <div class="warpper animated fadeInRight">
  <!-- 质量追溯发起-->
<div class="container-fluid panel-custom panel panel-default ">
    <div class="row">
        <!-- 位置预留  -->
        <form class="form-horizontal col-sm-12">
        <div class="row">
        <div class="form-group form-group-sm col-sm-6">
            <label class="control-label col-md-4">追溯来源：</label>
	                 <div class="col-md-8">
	                   <select  class="form-control">
						          <option value="">内部质量问题</option>
						          <option value="">客户投诉</option>
       						</select>
	                 </div>
        </div>
        <div class="form-group col-md-6 form-group-sm">
             <label class="control-label col-md-4">追溯问题：</label>
	                 <div class="col-md-8">
	                    <input type="text" class="form-control"/>
	                 </div>
        </div>
        </div>
        <div class="row">
		        <div class="form-group col-md-6 form-group-sm">
	                 <label class="control-label col-md-4">发起日期：</label>
	                 <div class="col-md-8">
	                    <div class="input-group col-sm-12 ">
				                   <input id="Start" type="text" class="form-control"/>
				                   <span class="input-group-addon">到</span>
				                   <input id="End" type="text" class="form-control"/>
				                 </div>
	                 </div>
		        </div>
		        <div class="form-group col-md-6 form-group-sm">
             <label class="control-label col-md-4">批次号：</label>
	                 <div class="col-md-8">
	                    <input type="text" class="form-control"/>
	                 </div>
        </div>
        </div>
        <div class="row">
        <div class="col-sm-12 text-right">
            <button class="btn btn-primary btn-sm" onclick="fun_submit()" ><span class="glyphicon glyphicon-search"></span>查询</button>
        </div>
        </div>
        </form>
    </div>
    </div>
    
    <!-- 质量追溯任务信息列表 -->
    <div class="container-fluid panel-custom panel panel-default">
    <div class="row">
        <div class="col-sm-12">
            <h4 class="page-header">质量追溯任务信息列表</h4>
        </div>
    </div>
     <div class="col-sm-12">
            <table id="table1" class="table table-striped table-hover table-condensed table-bordered text-center">
                <thead>
                    <tr>
                        <th class="text-left"><input type="checkbox" id="checkall"></th>
                        <th>任务编号</th>
                        <th>追溯来源</th>
                        <th>物料编号</th>
                        <th>批次号</th>
                        <th>追溯问题</th>
                        <th>内容描述</th>
                        <th>发起人</th>
                        <th>发起时间</th>
                        <th>状态</th>
                    </tr>
                </thead>
                <tbody>
                  <tr>
	                  <td class="text-left"><input type='checkbox' name='checkList'></td>
	                  <td>1001</td>
	                  <td>客户投诉</td>
	                  <td>XXX</td>
	                  <td>XXX</td>
	                  <td>XXX</td>
	                  <td>XXXX</td>
	                  <td>张三</td>
	                  <td>20170520 10：10：00</td>
	                  <td>编辑</td>
                 </tr>  
               
                </tbody>
            </table>
    </div>
<div class="row">
<div class="col-sm-12 text-right"> 
<button class="btn btn-primary btn-sm" data-toggle="modal"  data-target="#addmodal"><span class="glyphicon glyphicon-plus"></span>新增</button>
<!-- 只能本人修改 -->
<button class="btn btn-primary btn-sm" data-toggle="modal"  data-target="#addmodal"><span class="glyphicon glyphicon-pencil"></span>修改</button>
<!-- 删除编辑状态的任务，只能操作本人的任务 -->
<button class="btn btn-primary btn-sm" onclick="cancel()" ><span class="glyphicon glyphicon-trash"></span>删除</button>
<button class="btn btn-primary btn-sm" data-toggle="modal"  data-target="#sumbit"><span class="glyphicon glyphicon-ok"></span>提交</button>
</div>
</div>
</div>

<!-- 新增模态框（Modal） -->
<form method="post" action="" class="form-horizontal" role="form" id="form_data" onsubmit="return check_form()" style="margin: 20px;">
    <div class="modal fade" id="addmodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:900px">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        质量追溯发起信息维护
                    </h4>
                </div>
        <div class="modal-body">
        <div class="row">
        <div class="form-group form-group-sm col-sm-6">
             <label class="control-label col-md-4">追溯来源：</label>
	                 <div class="col-md-8">
	                   <select  class="form-control">
						          <option value="">客户投诉</option>
						          <option value="">内部质量问题</option>
       						</select>
	                 </div>
        </div>
        <div class="form-group form-group-sm col-sm-6">
             <label class="control-label col-md-4">追溯问题：</label>
	                 <div class="col-md-8">
	                   <input type="text" class="form-control">
	                 </div>
        </div>
        </div>
        <div class="row">
        <div class="form-group form-group-sm col-sm-6">
             <label class="control-label col-md-4">物料编号：</label>
	                 <div class="col-md-8">
	                   <input type="text" class="form-control">
	                 </div>
        </div>
       <div class="form-group form-group-sm col-sm-6">
             <label class="control-label col-md-4">批次号：</label>
	                 <div class="col-md-8">
	                    <input type="text" class="form-control">
	                 </div>
        </div>
      </div>
      <div class="row">
        <div class="form-group form-group-sm col-sm-6">
             <label class="control-label col-md-4">内容描述：</label>
	                 <div class="col-md-8">
						     <textarea class="form-control" rows="3"></textarea>
	                 </div>
        </div>
      </div>
      <div class="row">
        <div class="form-group form-group-sm col-sm-6">
             <label class="control-label col-md-4">发起人：</label>
	                 <div class="col-md-8">
	                    <input type="text" class="form-control" placeholder="系统当前操作者" disabled>
	                 </div>
        </div>
        <div class="form-group form-group-sm col-sm-6">
             <label class="control-label col-md-4">发起日期：</label>
	                 <div class="col-md-8">
						    <input type="text" class="form-control" placeholder="系统当前时间" disabled>
	                 </div>
        </div>
      </div>
      <div class="row">
      <div class="col-sm-12 text-center">
      <button class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-floppy-disk"></span>物料信息</button>
      <button class="btn btn-primary btn-xs" onclick="Save()"><span class="glyphicon glyphicon-saved"></span>新增保存</button>
      </div>
      </div>
      
      </div>
       </div>
     </div>
     </div>
            </form>
            
            
<!-- 提交模态框（Modal） -->
    <div class="modal fade" id="sumbit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        专检任务信息维护
                    </h4>
                </div>
        <div class="modal-body">
        <form method="post" action="" class="form-horizontal" role="form" id="form_data" onsubmit="return check_form()" style="margin: 20px;">
        <div class="row">
        <div class="col-sm-12 text-center">
             <label class="control-label col-md-4">下一步骤：</label>
	                 <div class="col-md-8">
	                   <select id="task"  class="form-control">
						          <option  value="追溯任务分配">追溯任务分配</option>
						          <option  value="追溯查询">追溯查询</option>
       						</select>
	                 </div>
        </div>
        </div>
        </form>
      <div class="row">
      <div class="col-sm-12 text-center">
      <button class="btn btn-primary btn-xs" onclick="Sumbit()"><span class="glyphicon glyphicon-ok"></span>提交</button>
      </div>
      </div>
       </div>
     </div>
     </div>
     </div>
</div>
</div>
 <script type="text/javascript">
 $(function(){
	 //绑定tadatable
	  $("#table1").DataTable({
          "searching": false,
          "ordering": false,//是否排序
          "pagingType": "full_numbers",// 分页类型
          "bLengthChange": false,//是否开启分页功能,即使设置为false,仍然会有一个默认的<前进,后退>分页组件
          "language": {//自定义语言设计
              "sLengthMenu": "每页显示 _MENU_ 条记录",//
              "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",//页脚信息
              "sInfoEmpty": "没有数据",//表格数据时
              "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
              "sZeroRecords": "没有检索到数据",
              "sSearch": "查找:",//
              "oPaginate": {//设置分页按钮
                  "sFirst": "首页",
                  "sPrevious": "前一页",
                  "sNext": "后一页",
                  "sLast": "尾页"
              }
          }
      });
 
 });
 
 
//checkbox全选
 $("#checkall").click(function () {
     if ($(this).prop("checked")) {
         $("input[name='checkList']").prop("checked", true);
         $("tr").addClass('selected');
     } else {
         $("input[name='checkList']").prop("checked", false);
         $("tr").removeClass('selected');
     }
 });
 
 $(function(){
	   $('#Start').datetimepicker({
		   format: "Y-m-d",
			   lang:'ch'
	   });
	   $('#End').datetimepicker({format: "Y-m-d",
		   lang:'ch'});
 });

 //点击使用弹窗
 $('#addmodal').modal({
     show : false,//加载一次 index.html 到容器内
     backdrop : false,//按下 esc 不关闭
     keyboard : true,//初始化隐藏，如果是按钮点击触发，第一次点击则无法显示，第二次显示。
   //href="index.html"
}); 
 
 //点击使用弹窗
 $('#sumbit').modal({
     show : false,//加载一次 index.html 到容器内
     backdrop : false,//按下 esc 不关闭
     keyboard : true,//初始化隐藏，如果是按钮点击触发，第一次点击则无法显示，第二次显示。
   //href="index.html"
}); 
//确认保存
 function Save(){
	  layer.confirm("请确定是否保存？", function () {
         sysLoading();
         $.ajax({
             type: "post",
             url: "",
             data: postdata,
             success: function (json) {
                 sysAlert("保存成功！", function () {
                     
                 });
             },
             error: function (data){
           	  sysAlert('保存失败:' + data);
                 
             }
         })
     })
 }

 //确认删除
 function cancel(){
	  layer.confirm("请确定是否删除？", function () {
         sysLoading();
         $.ajax({
             type: "post",
             url: "",
             data: postdata,
             success: function (json) {
                 sysAlert("删除成功！", function () {
                     
                 });
             },
             error: function (data){
           	  sysAlert('删除失败:' + data);
                 
             }
         })
     })
 }
 
//确认提交
 function Sumbit(){
	
	// alert($("#task").);
	var url;
	var Judg = $("#task").find("option:selected").text();//获取值
	//alert(Judg);
	if(Judg =="追溯任务分配"){
			   //任务分配
			//url ="task_assignment.html";
			  // alert(1);
			  layer.confirm("确定要跳转到追溯任务分配？", function () {
		   layer.closeAll();
		   window.location.href ="traceability_task_assignment.html";
	 }) 
		
	}else{
		 layer.confirm("确定要跳转到追溯查询？", function () {
			   layer.closeAll();
			 window.location.href ="traceability_inquire.html";
		 }) 
		
	}
	
  }
 //traceability_task_assignment.html  追溯任务分派
 //traceability_inquire.html   追溯查询
</script>

</body>
</html>