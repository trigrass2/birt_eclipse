 <!--#include virtual="/mes-plan/include/header.html" -->
 <style type="text/css">
   table tr td{
   text-align:center;
   }
   .selected{
	   background-color:lightgray;
   }
   </style>
   <div class="bill_list_add">
     <div class="wrapper wrapper-content animated fadeInRight container-fluid panel panel-custom panel-default">
		       	   <!-- 单据头-->
	       	         <div class="row">
				        <!-- 标题栏  -->
					        <div class="col-sm-12">
					            <h4 class="page-header">单据头</h4>
					        </div>
				      </div>
				      <div class="row">
				        <div class="col-sm-12">
				           <form class="form-horizontal">
				              <div class="row">
					            <div class="col-sm-6 form-group">
					                <label class="col-sm-4 control-label"><span style="color:red;">*</span>单号：</label>
					                <div class="col-sm-8">
					                   <input type="text" class="form-control" disabled="disabled" value="W0001"/>
					                </div>
					            </div>
					            <div class="col-sm-6 form-group">
					                <label class="col-sm-4 control-label"><span style="color:red;">*</span>单据名称：</label>
					                <div class="col-sm-8">
					                    <select class="form-control">
							                      <option value="W1001">完工入库单</option>
							                      <option value="W1002">库存调拨单</option>
							                      <option value="W1003">备品备件领料单</option>
							            </select>
					                </div>
					             </div>
					         </div>
						      <div class="row">
						            <div class="col-sm-6 form-group">
						                <label class="col-sm-4 control-label"><span style="color:red;">*</span>单据类型：</label>
						                <div class="col-sm-8">
						                   <select class="form-control">
								                      <option value="生产出库">生产出库</option>
								                      <option value="其他出库">其他出库</option>
								                      <option value="生产入库">生产入库</option>
								                      <option value="调拨">调拨</option>
								                      <option value="盘点">盘点</option>
								            </select>
						                </div>
						            </div>
						            <div class="col-sm-6 form-group">
						                <label class="col-sm-4 control-label"><span style="color:red;">*</span>单据描述：</label>
						                <div class="col-sm-8">
						                    <input type="text" class="form-control" disabled="disabled" value="半成品、成品完工入库"/>
						                </div>
						             </div>
						         </div>
						      <div class="row">
						            <div class="col-sm-6 form-group">
						                <label class="col-sm-4 control-label"><span style="color:red;">*</span>部门：</label>
						                <div class="col-sm-8">
						                   <input type="text" class="form-control" value="二织车间"/>
						                </div>
						            </div>
						            <div class="col-sm-6 form-group">
						                <label class="col-sm-4 control-label"><span style="color:red;">*</span>创建人：</label>
						                <div class="col-sm-8">
						                    <input type="text" class="form-control" disabled="disabled" value="王五"/>
						                </div>
						             </div>
						         </div>
						      <div class="row">
						            <div class="col-sm-6 form-group">
						                <label class="col-sm-4 control-label"><span style="color:red;">*</span>日期：</label>
						                <div class="col-sm-8">
				                                <div id="qqq" class="input-group date">
				                                    <input type="text" class="form-control" readonly>
				                                    <span class="input-group-addon">
				                                        <i class="glyphicon glyphicon-th"></i>
				                                    </span>
				                                </div>
						                </div>
						            </div>
						            <div class="col-sm-6 form-group">
						                <label class="col-sm-4 control-label"><span style="color:red;">*</span>单据状态：</label>
						                <div class="col-sm-8">
							                    <select class="form-control">
									                      <option value="已创建">已创建</option>
									                      <option value="已提交">已提交</option>
									                      <option value="已驳回">已驳回</option>
									                      <option value="已批准">已批准</option>
									                      <option value="已过账">已过账</option>
									            </select>
						                </div>
						             </div>
						         </div>
						      <div class="row">
						            <div class="col-sm-6 form-group">
						                <label class="col-sm-4 control-label"><span style="color:red;">*</span>生产订单：</label>
						                <div class="col-sm-4" style="padding-right: 0px;">
						                    <input type="text" class="form-control" />
						                </div>
						                <div class="col-sm-4" style="padding-left: 1px;">
						                      <select class="form-control">
						                                  <option value="">--请选择--</option>
									                      <option value="W2017050501">W2017050501</option>
									                      <option value="W2017050501">W2017050502</option>
									                      <option value="W2017050501">W2017050503</option>
									            </select>
						                </div>
						            </div>
						         </div>
					           </form>
					        </div>
					      </div>
    </div>
    		       	    
      <!-- 单据行-->
      <div class="wrapper wrapper-content animated fadeInRight container-fluid panel panel-custom panel-default">
	       	         <div class="row">
				        <!-- 标题栏  -->
				        <div class="col-sm-12">
				            <h4 class="page-header">单据行</h4>
				        </div>
				      </div>
				      <!-- 操作按钮组 -->
					  <div class="row">
					        <div class="col-sm-12">
					            <div class="btn-group btn-group-sm" style="float:right;">
					                <a class="btn btn-primary" href='javascript:void(0)' onclick="fun_addbill()"><span class="glyphicon glyphicon-plus"></span>添加</a>
					                <a class="btn btn-primary" href='javascript:void(0)' id="del_but" ><span class="fa fa-trash"></span>&nbsp;删除</a>
					            </div>
					        </div>
					    </div>
					  <div class="row">
					   <div class="col-sm-12">
				       	    <table id="tab" style="width:100%"  class="table  table-bordered "  >
	                                  <thead>
	                                      <tr>
	                                      	<th>行号</th>
	                                      	<th>物料编号</th>
	                                      	<th>物料名称</th>
	                                      	<th>型号</th>
	                                      	<th>规格</th>
	                                      	<th>物料单位</th>
	                                      	<th>仓库</th>
	                                      	<th>批号</th>
	                                      	<th>实际数量</th>
	                                      	<th>备注</th>
	                                      </tr>
	                                  </thead>
		                            <tbody> 
		                            </tbody>
		                      </table>
		                      </div>
	                  </div>             

	       	         <!-- 按钮 -->
	       	         <div class="row">
				        <div class="col-sm-12 text-center" style="margin:10px;">
				            <div class="btn-group">
				               <button class="btn btn-primary" onclick="fun_save2()" ><span class="glyphicon glyphicon-floppy-disk"></span>保存</button>
					    	  &nbsp;&nbsp;<button class="btn btn-primary" onclick="fun_sub()" ><span class="glyphicon glyphicon-ok"></span>提交</button>
				              &nbsp;&nbsp;<button class="btn btn-primary" onclick="fun_cancel()" ><span class="glyphicon glyphicon-remove"></span>取消</button>
				              &nbsp;&nbsp;<button class="btn btn-primary" onclick="fun_cancelsub()" ><span class="glyphicon glyphicon-remove"></span>取消提交</button>
				              &nbsp;&nbsp;<button class="btn btn-primary" onclick="fun_guozhang()" ><span class="glyphicon glyphicon-remove"></span>过账</button>
				            </div>
				        </div>
				   </div>
		       	  
	</div>
</div>
	<script type="text/javascript">  
		  $(function(){
			   var table=  $('#tab').DataTable({
		      		"searching": false,
	                  "ordering": false,
	                  "pagingType": "full_numbers",
	                  "bLengthChange": false,
	                  "language": {
	                      "sLengthMenu": "每页显示 _MENU_ 条记录",
	                      "sInfo": "从 _START_ 到 _END_ /共 _TOTAL_ 条数据",
	                      "sInfoEmpty": "没有数据",
	                      "sInfoFiltered": "(从 _MAX_ 条数据中检索)",
	                      "sZeroRecords": "没有检索到数据",
	                      "sSearch": "查找:",
	                      "oPaginate": {
	                          "sFirst": "首页",
	                          "sPrevious": "前一页",
	                          "sNext": "后一页",
	                          "sLast": "尾页"
	                      }
	                  },
		                "ajax":{
                       "url":"/mes-plan/material/data/billadd.txt",
                       "error":function()
		                         {
		                        	 alert("数据加载失败");
		                         }
		                },
		                "columns":[
		                	 {
	    	            		 "data": null,
	    	            		 "createdCell": function (nTd, sData, oData, iRow, iCol) {
	    	            		 var startnum = this.api().page() * (this.api().page.info().length);
	    	            		 $(nTd).html(iRow + 1 + startnum); //分页行号累加：$(nTd).html(iRow+1);
	    	            		 }
	    	            	 },
		                	 {"data": "wlbm"},
		                	 {"data": "wlmc"},
		                	 {"data": "xh"},
		                	 {"data": "gg"},
		                	 {"data": "wldw"},
		                	 {"data": "ck"},
		                	 {"data": "ph"},
		                	 {"data": "sjsl"},
		                	 {"data": "bz"}]  
		      	  });
			  //日期控件
	    	  $('#qqq').datepicker({
	              format: "yyyy-mm-dd",
	              language: "zh-CN",
	              autoclose: true
	          });
			  
	    	  //添加单行选中
	      	   $('#tab tbody').on( 'click', 'tr', function () {
	      		          if ( $(this).hasClass('selected') ) {
	      		              $(this).removeClass('selected');
	      		          }
	      		          else {
	      		              table.$('tr.selected').removeClass('selected');
	      		              $(this).addClass('selected');
	      		          }
	      		  } );
	    	  
	      	   
	  		  //这里直接绑定删除按钮
	  	   $('#del_but').click( function () {
	  		if($('#tab tbody tr').hasClass('selected')){
	  		     table.row('.selected').remove().draw( false );
	  		          console.log(table.row('.selected'));
	  		          //可以进行后台删除 然后重新加载数据
	  		}else{
	  			layer.alert("请选择一条数据！");
	  		}
	       } );
			  
		  });

  		function fun_addbill()
  		{
  			layer.open({
                type: 2,
                title: '单据行添加',
                area: ['770px', '345px'], //宽高
                content: ['material_add_billline.html', 'no']
            });
  		}
  		function fun_sub(){//提交
  	  			layer.alert("单据已提交！");
  		}
  		
  		function fun_save2(){//保存
	  			layer.alert("单据已保存！");
		}
  		
  		function fun_cancel(){
  			layer.confirm('确定取消对单据的修改？', {
	  			  btn: ['是','否'] //按钮
	  			}, function(){
	  			  layer.msg('取消成功',{
	  				  time:3000
	  			  });
	  			window.location.href="/mes-plan/material/material_billlist.html";
	  			});
  		}
  		
  		function fun_cancelsub(){//取消提交	
  			layer.confirm('确定取消提交？', {
	  			  btn: ['是','否'] //按钮
	  			}, function(){
	  			  layer.msg('取消成功',{
	  				  time:3000
	  			  });
	  			});
		}
  		
  		function fun_guozhang(){
  			layer.alert("单据已过账！");
  		}		
		  </script>